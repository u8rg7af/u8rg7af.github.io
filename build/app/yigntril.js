/*! Built with http://stenciljs.com */
const{h:t}=window.App;class e{comparePatterns(t,e){for(let a=0;a<t.length;a++)if(t[a]!=e[a])return!1;return!0}createNewStep(){return Math.ceil(4*Math.random())}}class a{gamepadTouched(t){this.userProposal.push(t.detail),this.game.comparePatterns(this.userProposal,this.animationPattern)?this.userProposal.length==this.animationPattern.length&&setTimeout(()=>{this.animationPattern=[...this.animationPattern,this.game.createNewStep()],this.userProposal=[]},500):this.history.replace(`/gameover/${this.animationPattern.length-1}`,{})}componentWillLoad(){this.game=new e,this.userProposal=[],this.animationPattern=[this.game.createNewStep()]}render(){return t("div",null,t("header",null,t("h1",null,"Simon Game")),t("main",null,t("sn-gameboard",{animationPattern:this.animationPattern})))}static get is(){return"sn-game"}static get properties(){return{animationPattern:{state:!0},history:{type:"Any",attr:"history"}}}static get style(){return""}}class n{constructor(){this.step=0}animationPatternChanged(){this.step=0}blinkFinished(){this.step+=1}get heading(){return this.isPlaying?"Memorize the pattern":"Replay the pattern"}get isPlaying(){return this.step<this.animationPattern.length}render(){let e=[];for(let a=1;a<=4;a++){let n={gamepad:!0};n["gamepad-"+a]=!0,n.blink=this.animationPattern[this.step]==a,this.isPlaying?e.push(t("button",{class:n})):e.push(t("button",{onClick:()=>this.gamepadTouched.emit(a),class:n}))}return t("section",null,t("h2",null,this.heading),t("div",{class:"gameboard"},e))}static get is(){return"sn-gameboard"}static get properties(){return{animationPattern:{type:"Any",attr:"animation-pattern",watchCallbacks:["animationPatternChanged"]},step:{state:!0}}}static get events(){return[{name:"gamepadTouched",method:"gamepadTouched",bubbles:!0,cancelable:!0,composed:!0}]}static get style(){return".gameboard{display:flex;flex-wrap:wrap;max-width:500px;min-width:300px;width:60vw}.gamepad{border:2px solid #000;border-radius:15px;flex-basis:40%;padding:20% 0;margin:5%}.gamepad:active,.gamepad:focus{outline:0}.gamepad:active{opacity:.4}.gamepad-1{background:#ff0}.gamepad-2{background:red}.gamepad-3{background:green}.gamepad-4{background:#00f}.blink{animation-name:blink;animation-duration:1s;animation-iteration-count:infinite}\@keyframes blink{0%{opacity:1}25%{opacity:.4}50%{opacity:1}}"}}export{a as SnGame,n as SnGameboard};